# 目的
利用线性回归方程拟合输入数据与输出数据的拟合方程。其中由于输入参数维度大，需要大量数据才可以完成拟合过程，所以引入pca方法将输入参数降为到有限的几个参数从而满足较少数据样本的情况下也可以拟合出较好效果。

# 过程
本算法分为两个过程

## 过程-拟合(训练)
提供一个数据集，指定某一列数据为输出值，其他参数为输入值。由于现实数据中可能为出现空隙影响算法执行，故算法首先会将某列数据出现'null'的排除，不进行处理。
数据与处理好之后则进行pca主要值计算。由于提供的样本数量小于输入参数维度，故无法通过算法自动分析出该数据集包含哪几个主要成分（参考pac算法），故需要我们事先手动定义pac主要成分的个数。通过对数据进行分析，发现在指定pac主要成分个数为3时有较好效果：（其主要成分占比为 96% 1.7% 1.2%, 可以判断主要成分只有一个，但为了保证拟合过程不易出现过拟合，所以设定主要成分为三个）。计算pac的结果是三个维度的主要成分和主要成分的占比(pca explained variance ratio)，过程中也打印了从输入参数到pac输出的变换矩阵（pca components)。
回归过程计算的是pca主要成分到输出值的拟合方程。目前得到的拟合方程是 x1*(0.00167498) + x2*(0.056102) + x3(-0.32647903)。拟合方程通过设定目标来实现自动推导的退出。以下是回归过程：
首先将数据集(pca和输出值)分为两类：训练集和验算集。其具体做法是从数据集中随机抽样50%(变量 test_ratio)作为验算集，剩下的部分为训练集。回归方程在训练集进行训练后会将验算集输入到回归方程检查该方程的预测值和实际输出值的误差，将所有误差统计为R2_score值，打印出来(lr score)
算法将pca参数以及线性拟合方程参数保存到当前目录的(.cache)文件，显示相关图形并退出。

## 过程-预测
预测过程需要先从当前目录加载.cache文件从而获取当前pca以及线性拟合方程的参数，再创建一个图形窗口要求用户输入相关参数(图形窗口使用pyQt编写)并对用户的输入参数进行预测

# 方程分析
## pca
输入有效参数为34个，输出的pca主要成分为3个。
设有效参数的矩阵为 IN, IN是一个 nx34的矩阵，其中n代表数据样本的数量。设pca输出的矩阵为 PCA_OUT, PCA_OUT是一个 nx3的矩阵。
设pca的转换矩阵为M, M应当是一个3x34的矩阵，其转置矩阵为T(M)
则pca公式为 IN * T(M) = PCA_OUT
打印中 pca components则是M。

## line regression
线性回归方程使用的是sklearn库，其拟合方式为线性拟合(1阶)。
一阶的三维线性回归方式的形式如下：
b + x1*a1 + x2*a2 + x3*a3 = output
其中b是偏移量，通常为0， x1..x3为输入参数， a1...a3是拟合方程拟合的结果参数。
[b, a1..a3]在打印中coef_的值。

## 整体公式
[ in1, in2, ... in33] * T(M) * T([a1, a2, a3]) + b 即是整体公式